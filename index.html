<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Noble Dental Nallagandla | Top Dental Clinic in Hyderabad</title>
  <link rel="icon" type="image/png" href="images/favicon.png">
  <meta name="description" content="Noble Dental Nallagandla offers expert dental services including implants, whitening, root canal, and emergency care in Hyderabad." />
  <meta name="keywords" content="Dental Clinic Hyderabad, Best Dentist Nallagandla, Teeth Whitening, Root Canal, Dental Implants, Emergency Dental Care" />
  <meta name="author" content="Noble Dental Nallagandla" />
  <meta name="google-site-verification" content="YOUR_VERIFICATION_CODE_HERE" />

  <link rel="stylesheet" href="style.css">
  <script src="https://kit.fontawesome.com/a2e0e6a89b.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'> 
  
  <!-- Open Graph / Facebook -->
  <meta property="og:title" content="Noble Dental Nallagandla - Best Dental Clinic in Hyderabad" />
  <meta property="og:description" content="Expert dental treatments including implants, whitening, root canals, and more in Hyderabad." />
  <meta property="og:image" content="https://nobledentalnallagandla.in/images/logo.png" />
  <meta property="og:url" content="https://nobledentalnallagandla.in/" />
  <meta property="og:type" content="website" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Noble Dental Nallagandla - Best Dental Clinic in Hyderabad" />
  <meta name="twitter:description" content="Expert dental care including dental implants, root canals, and teeth cleaning." />
  <meta name="twitter:image" content="https://nobledentalnallagandla.in/images/logo.png" />

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Dentist",
    "name": "Noble Dental Nallagandla",
    "image": "https://nobledentalnallagandla.in/images/logo.png",
    "@id": "https://nobledentalnallagandla.in/",
    "url": "https://nobledentalnallagandla.in/",
    "telephone": "+91-8610425342",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Nallagandla Main Road",
      "addressLocality": "Hyderabad",
      "addressRegion": "Telangana",
      "postalCode": "500019",
      "addressCountry": "IN"
    },
    "openingHoursSpecification": [
      {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": [
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday"
        ],
        "opens": "11:00",
        "closes": "22:00"
      },
      {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": "Sunday",
        "opens": "10:00",
        "closes": "15:00"
      }
    ]
  }
</script>

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){ dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXX');
</script>
</head>
<body>

        <header data-aos="fade-down" data-aos-duration="2000">
            <div class="left">
                <img src="images/dentalcare.nallagandla.png" alt="Noble Dental Clinic - Nallagandla logo">
                <h2><span style="color: #0a0c12d6;">Noble </span>Dental Care</h2>
            </div>

    <nav>  <!-- Use <nav> for the navigation -->            
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Specialities</a></li>
                <li><a href="#">Selfcare</a></li>
                <li><a href="#">Gallery</a></li>
                <li><a href="#">Patient Login</a></li>
                <li><a href="#">Our Team</a></li>
                <li><a href="#">Know More</a></li>    
            </ul>
    </nav>

<div class="box-icons">
  <a href="#"><i class='bx bxl-youtube'></i></a>
  <a href="#"><i class='bx bxl-github'></i></a>
  <a href="#"><i class='bx bxl-linkedin-square'></i></a>
</div>
            
            <div class="menu-icon">
                <i class='bx bx-menu'></i>
            </div>            
        </header>
  
<!-- Gradient Background Hero Section -->
<section class="hero-background">
  <div class="blackhole-box">
    <video autoplay muted loop playsinline src="videos/blackhole.mp4"></video>
  </div>
    <div class="hero-info-title">
      <i class='bx bxl-sketch'></i>
      HealthFlo Hospitals & Clinic
    </div>

    <h1 data-aos="fade-right" data-aos-duration="3000">
      Providing <span class="gradient">the best</span> Dental Care <span class="gradient">Experience</span>
    </h1>

    <p>Meet our team of expertise with advancements and treatment standards</p>

    <div class="hero-buttons">
      <a href="https://wa.me/918610425342" target="_blank" class="hero-button whatsapp">
        <i class='bx bxl-whatsapp'></i> WhatsApp
      </a>

      <a href="tel:+918610425342" class="hero-button call">
        <i class='bx bxs-phone'></i> Call
      </a>

      <a href="mailto:nobledental.org@gmail.com" class="hero-button mail">
        <i class='bx bx-envelope'></i> Mail
      </a>

      <a href="https://g.co/kgs/Lebjyvw" target="_blank" class="hero-button location">
        <i class='bx bx-map'></i> Location
      </a>
    </div>
  <div class="scroll-down"></div>
</section>

<section class="info-section">
    <div class="container">
        <h1 class="section-title autoDisplay">Treatments We Offer</h1>

        <input type="text" id="complaintInput" placeholder="Explore your dental concerns..." oninput="shuffleCards(this.value)">

        <section class="services-grid" id="servicesGrid">
            <!-- Service Card 1: Teeth Whitening -->
                    <article class="service-card" data-keywords="teeth whitening, brighten, smile, radiant look, discoloration" data-url="https://www.example.com/teeth-whitening">
                        <div class="text-section">
                            <h3>Teeth Whitening</h3>
                            <p>Brighten your smile with professional whitening for a radiant look. Say goodbye to discoloration!</p>
                            <a href="https://www.example.com/teeth-whitening" class="read-more-button">Read More</a>
                        </div>
                        <img src="https://www.casadental.com.sg/wp-content/uploads/2024/02/White-Teeth-1.png" alt="Teeth Whitening">
                    </article>

                    <!-- Service Card 2: Invisalign -->
                    <article class="service-card" data-keywords="invisalign, aligners, straighten, discreet, comfortable" data-url="https://www.example.com/invisalign">
                        <div class="text-section">
                            <h3>Invisalign</h3>
                            <p>Discreet clear aligners for straightening teeth. Get a comfortable, nearly invisible alternative to braces.</p>
                            <a href="https://www.example.com/invisalign" class="read-more-button">Read More</a>
                        </div>
                        <img src="https://supersmilesfl.com/wp-content/uploads/2021/02/GettyImages-1210031986-scaled.jpg" alt="Invisalign Clear Aligners">
                    </article>

                    <!-- Service Card 3: Dental Implants -->
                    <article class="service-card" data-keywords="dental implants, tooth loss, replacement, secure, natural-looking" data-url="https://www.example.com/dental-implants">
                        <div class="text-section">
                            <h3>Dental Implants</h3>
                            <p>Secure, natural tooth replacements. Restore your smile & confidence with our durable implants.</p>
                            <a href="https://www.example.com/dental-implants" class="read-more-button">Read More</a>
                        </div>
                        <img src="https://d3b3by4navws1f.cloudfront.net/herol.png" alt="Dental Implants">
                    </article>

                    <!-- Service Card 4: Root Canal -->
                    <article class="service-card" data-keywords="root canal, infection, pain, save tooth" data-url="https://www.example.com/root-canal">
                        <div class="text-section">
                            <h3>Root Canal</h3>
                            <p>Save infected teeth with effective care. Our root canal relieves pain and restores your tooth’s health.</p>
                            <a href="https://www.example.com/root-canal" class="read-more-button">Read More</a>
                        </div>
                        <img src="https://dentistauburnca.com/wp-content/uploads/2022/04/root-canal.png" alt="Root Canal Treatment">
                    </article>

                    <!-- Service Card 5: Braces & Aligners -->
                    <article class="service-card" data-keywords="braces, aligners, crooked teeth, perfect smile, orthodontic" data-url="https://www.example.com/braces">
                        <div class="text-section">
                            <h3>Braces & Aligners</h3>
                            <p>Orthodontic options for a perfect smile. Correct teeth and improve your bite!</p>
                            <a href="https://www.example.com/braces" class="read-more-button">Read More</a>
                        </div>
                        <img src="https://www.jindaldentalclinic.com/wp-content/uploads/2018/03/speed-braces.png" alt="Braces and Aligners">
                    </article>

                    <!-- Service Card 6: Wisdom Teeth Removal -->
                    <article class="service-card" data-keywords="wisdom teeth, removal, extraction, safe, prevent discomfort" data-url="https://www.example.com/wisdom-teeth-removal">
                        <div class="text-section">
                            <h3>Wisdom Teeth Removal</h3>
                            <p>Safe extraction of wisdom teeth to prevent discomfort and infection. Smooth procedure.</p>
                            <a href="https://www.example.com/wisdom-teeth-removal" class="read-more-button">Read More</a>
                        </div>
                        <img src="https://queensboroplazadental.com/wp-content/uploads/2024/02/GettyImages-1406686372.jpg.webp" alt="Wisdom Teeth Removal">
                    </article>

                    <!-- Service Card 7: Veneers & Smile Makeovers -->
                    <article class="service-card" data-keywords="veneers, smile, makeover, custom, aesthetic improvements" data-url="https://www.example.com/veneers">
                        <div class="text-section">
                            <h3>Veneers & Smile Makeovers</h3>
                            <p>Transform your smile with custom veneers and aesthetic improvements. Beautiful smiles guaranteed.</p>
                            <a href="https://www.example.com/veneers" class="read-more-button">Read More</a>
                        </div>
                        <img src="https://www.dakabindental.com/wp-content/uploads/2020/08/veneers.png" alt="Veneers and Smile Makeovers">
                    </article>

                    <!-- Service Card 8: Crowns & Bridges -->
                    <article class="service-card" data-keywords="crowns, bridges, restoration, natural look, tooth function" data-url="https://www.example.com/crowns-bridges">
                        <div class="text-section">
                            <h3>Crowns & Bridges</h3>
                            <p>Restore your teeth's function & create a natural look with crowns & bridges.</p>
                            <a href="https://www.example.com/crowns-bridges" class="read-more-button">Read More</a>
                        </div>
                        <img src="https://marigolddentaluae.com/wp-content/uploads/2024/12/Crowns-Bridges.png" alt="Crowns and Bridges">
                    </article>
                </section>
            </div>
        </section>

    <!-- Doctor List + Animated Profile Card Section -->
<section class="doctor-ui-section">
  <div class="doctor-list-ui" id="doctorList"></div>
  <div class="doctor-profile-ui" id="doctorProfile"></div>
</section>
  
<!-- ============ CLINIC GALLERY (Coverflow) ============ -->
<section id="clinic-gallery" class="cg">
  <h2 class="cg-title">Clinic Gallery</h2>

  <div class="cg-stage" aria-label="Clinic gallery" tabindex="0">
    <button class="cg-nav cg-prev" aria-label="Previous">&#10094;</button>

    <ul class="cg-track">
      <!-- Replace src + data-title as you like -->
      <li class="cg-item" data-title="Surgery Room">
        <img src="https://omegadentists.com/wp-content/uploads/2020/02/Alveoloplasty-Houston.jpg" alt="Surgery Room">
      </li>
      <li class="cg-item" data-title="Prosthetics">
        <img src="https://png.pngtree.com/png-vector/20241105/ourmid/pngtree-full-set-of-dentures-with-gums-and-teeth-png-image_14152999.png" alt="Prosthetics">
      </li>
      <li class="cg-item" data-title="Orthodontics">
        <img src="https://st5.depositphotos.com/1238677/65537/i/450/depositphotos_655379690-stock-photo-abnormal-teeth-position-correction-metal.jpg" alt="Orthodontics">
      </li>
      <li class="cg-item" data-title="Aligners">
        <img src="https://elitedental.com.vn/en/wp-content/uploads/sites/8/2024/07/advantages-of-clear-aligners.jpg" alt="Aligners">
      </li>
      <li class="cg-item" data-title="Implants">
        <img src="https://www.fastnewsmile.com/wp-content/uploads/2022/04/Common-Questions-About-Zirconia-Dental-Implants-1024x683.png" alt="Implants">
      </li>
      <li class="cg-item" data-title="Post-Op">
        <img src="https://omegadentists.com/wp-content/uploads/2020/02/Alveoloplasty-Houston.jpg" alt="Post-Op">
      </li>
    </ul>

    <button class="cg-nav cg-next" aria-label="Next">&#10095;</button>
  </div>

  <div class="cg-dots" aria-label="Slide pagination"></div>
</section>

<!-- Lightbox -->
<div id="cg-lightbox" class="cg-lb cg-hidden" aria-hidden="true">
  <div class="cg-lb-inner">
    <button class="cg-lb-close" aria-label="Close">&times;</button>
    <button class="cg-lb-prev" aria-label="Previous">‹</button>
    <button class="cg-lb-next" aria-label="Next">›</button>

    <div class="cg-lb-canvas" id="cg-lb-canvas">
      <img class="cg-lb-img" alt="">
    </div>
    <div class="cg-lb-caption"></div>

    <div class="cg-lb-tools">
      <button class="cg-lb-zo" data-zo="-">−</button>
      <button class="cg-lb-zo" data-zo="+">+</button>
      <button class="cg-lb-reset">Reset</button>
    </div>
  </div>
</div>

<!-- ===================== -->
<!-- Noble Dental: Testimonials -->
<!-- ===================== -->
<section id="testimonials" class="nd-testimonials" aria-label="Patient testimonials">
  <div class="nd-testimonials__head">
    <h2 class="nd-testimonials__title">What Our Patients Say 💬</h2>
    <p class="nd-testimonials__subtitle">Real stories. Real smiles. Real care.</p>
  </div>

  <div class="nd-testimonials__viewport">
    <div class="nd-testimonials__track" id="ndTestimonialsTrack">
      <!-- Card 1 -->
      <article class="nd-testimonials__card" tabindex="0">
        <div class="nd-testimonials__stars" aria-label="5 out of 5 stars">★★★★★</div>
        <p class="nd-testimonials__quote">
          “Absolutely amazing service! I felt no pain and the team was incredibly professional.”
        </p>
        <div class="nd-testimonials__author">
          <img src="https://i.pravatar.cc/80?img=12" alt="Photo of Sandeep" />
          <div>
            <h4>Sandeep R.</h4>
            <small>Root Canal & Crown</small>
          </div>
                <div class="testimonial">
                    <p>"Absolutely amazing service! I felt no pain and the team was incredibly professional."</p>
                    <h4>- Sandhya</h4>
                </div>          
        </div>
      </article>

      <!-- Card 2 -->
      <article class="nd-testimonials__card" tabindex="0">
        <div class="nd-testimonials__stars" aria-label="5 out of 5 stars">★★★★★</div>
        <p class="nd-testimonials__quote">
          “Clean, friendly environment. The doctors explained everything clearly. Highly recommend!”
        </p>
        <div class="nd-testimonials__author">
          <img src="https://i.pravatar.cc/80?img=32" alt="Photo of Lakshmi" />
          <div>
            <h4>Lakshmi T.</h4>
            <small>Teeth Whitening</small>
          </div>
        </div>
      </article>

      <!-- Card 3 -->
      <article class="nd-testimonials__card" tabindex="0">
        <div class="nd-testimonials__stars" aria-label="5 out of 5 stars">★★★★★</div>
        <p class="nd-testimonials__quote">
          “Best dental care experience ever! They even followed up after my procedure.”
        </p>
        <div class="nd-testimonials__author">
          <img src="https://i.pravatar.cc/80?img=5" alt="Photo of Meena" />
          <div>
            <h4>Meena K.</h4>
            <small>Implants</small>
          </div>
        </div>
      </article>

      <!-- Card 4 -->
      <article class="nd-testimonials__card" tabindex="0">
        <div class="nd-testimonials__stars" aria-label="5 out of 5 stars">★★★★★</div>
        <p class="nd-testimonials__quote">
          “Gentle, thorough, and super modern. My aligners journey has been smooth from day one.”
        </p>
        <div class="nd-testimonials__author">
          <img src="https://i.pravatar.cc/80?img=57" alt="Photo of Arjun" />
          <div>
            <h4>Arjun P.</h4>
            <small>Clear Aligners</small>
          </div>
        </div>
      </article>

      <!-- Card 5 -->
      <article class="nd-testimonials__card" tabindex="0">
        <div class="nd-testimonials__stars" aria-label="5 out of 5 stars">★★★★★</div>
        <p class="nd-testimonials__quote">
          “Fast appointments, transparent pricing, and a team that truly cares. I’m a fan.”
        </p>
        <div class="nd-testimonials__author">
          <img src="https://i.pravatar.cc/80?img=47" alt="Photo of Zoya" />
          <div>
            <h4>Zoya N.</h4>
            <small>Scaling & Polishing</small>
          </div>
        </div>
      </article>
    </div>

    <!-- Navigation -->
    <button class="nd-testimonials__nav nd-testimonials__nav--prev" aria-label="Previous testimonials">
      ‹
    </button>
    <button class="nd-testimonials__nav nd-testimonials__nav--next" aria-label="Next testimonials">
      ›
    </button>
  </div>

  <!-- Dots -->
  <div class="nd-testimonials__dots" id="ndTestimonialsDots" aria-label="Testimonials pagination"></div>

  <!-- Soft CTA strip -->
  <div class="nd-testimonials__cta">
    <span>Ready for a friendly, pain-free visit?</span>
    <a class="nd-testimonials__cta-btn" href="https://wa.me/918610425342" target="_blank" rel="noopener">Book on WhatsApp</a>
  </div>
</section>
  
        <section class="map-section">
            <h1 class="section-title autoDisplay">Find Us 📍</h1>
            <div class="map-container">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!..." width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
            </div>
        </section>

        <section class="footer">
            <h1>©️2025, Created by Dr Dhivakaran, C Akhila</h1>
<div class="box-icons">
    <a href="#"><i class='bx bxl-youtube'></i></a>
    <a href="#"><i class='bx bxl-github'></i></a>
    <a href="#"><i class='bx bxl-linkedin-square'></i></a>
</div>
        </section>
  
        <script>
      function shuffleCards() {
        /* TODO: Implement filtering later */
      }
          </script>
          
    <script src="app.js"></script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>AOS.init();</script>

  <script>
document.addEventListener("DOMContentLoaded", () => {
  const doctors = [
    {
      name: "Dr. Dhivakaran R",
      image: "images/doctors/dhivakaran.jpg",
      role: "Chief Medical Director",
      experience: "10 years",
      patients: "5,000+",
      rating: "4.9",
      specialities: "General Dentistry, Diagnostics, Digital Health",
      summary: "Expert in diagnostics, digital dental care, and patient management.",
      phone: "8074512305",
      achiev: "🏅",
    },
    {
      name: "Dr. Thik Vijay",
      image: "images/doctors/thikvijay.jpg",
      role: "Aesthetic Cosmetologist",
      experience: "11 years",
      patients: "3,200+",
      rating: "4.8",
      specialities: "Skin, Hair & Dental",
      summary: "Cosmetologist with expertise in skin, hair, and smile transformations.",
      phone: "9999999999",
      achiev: "🏆",
    },
    {
      name: "Dr. Roger Ronaldo",
      image: "images/doctors/roger.jpg",
      role: "Maxillofacial Surgeon",
      experience: "13 years",
      patients: "4,800+",
      rating: "4.9",
      specialities: "Maxillofacial Surgery",
      summary: "Surgeon specialized in complex jaw and facial reconstructive procedures.",
      phone: "8888888888",
      achiev: "🥇",
    },
    {
      name: "Dr. Deepak",
      image: "images/doctors/deepak.jpg",
      role: "Orthodontist",
      experience: "10 years",
      patients: "4,000+",
      rating: "4.7",
      specialities: "Braces, Aligners",
      summary: "Focused on orthodontics for beautiful, healthy smiles.",
      phone: "7777777777",
      achiev: "🎖️",
    },
    {
      name: "Dr. Manoj Reddy",
      image: "images/doctors/manoj.jpg",
      role: "Implantologist",
      experience: "13 years",
      patients: "2,900+",
      rating: "4.8",
      specialities: "Dental Implants, Oral Surgery",
      summary: "Expert in dental implants and restorative oral surgery.",
      phone: "6666666666",
      achiev: "🏵️",
    },
    {
      name: "Dr. Idhaya",
      image: "images/doctors/idhaya.jpg",
      role: "Health Insurance Expert",
      experience: "7 years",
      patients: "2,000+",
      rating: "4.6",
      specialities: "Insurance & Claims",
      summary: "Guiding patients with insurance and treatment claims.",
      phone: "5555555555",
      achiev: "🎗️",
    },
  ];

  // Create Doctor List
  const doctorList = document.getElementById('doctorList');
  doctorList.innerHTML = doctors.map((doc, idx) => `
    <div class="doctor-card-ui" data-index="${idx}">
      <img src="${doc.image}" class="doctor-avatar-ui" alt="${doc.name}" />
      <div class="doc-info-ui">
        <h4>${doc.name}</h4>
        <p>${doc.role}</p>
      </div>
      <span class="rating-ui">★ ${doc.rating}</span>
    </div>
  `).join('');

  // Show profile for selected doctor
  function showProfile(idx) {
    const d = doctors[idx];
    const profile = `
      <img src="${d.image}" class="profile-avatar-ui" alt="${d.name}">
      <div class="profile-name-ui">${d.name}</div>
      <div class="profile-role-ui">${d.role} &bull; ${d.experience}</div>
      <div class="profile-rating-ui">★ ${d.rating}</div>
      <div class="profile-stats-ui">
        <div>
          <div class="stat-val">${d.patients}</div>
          <div class="stat-label">Patients</div>
        </div>
        <div>
          <div class="stat-val">${d.experience}</div>
          <div class="stat-label">Years Exp</div>
        </div>
        <div>
          <div class="stat-val">${d.achiev}</div>
          <div class="stat-label">Achievements</div>
        </div>
      </div>
      <div class="profile-desc-ui">${d.summary}</div>
      <a class="profile-btn-ui" href="tel:${d.phone}">Book Appointment</a>
    `;
    const profileDiv = document.getElementById('doctorProfile');
    // Animate: reset then fade in
    profileDiv.style.opacity = 0;
    profileDiv.style.transform = "translateY(30px)";
    setTimeout(()=>{
      profileDiv.innerHTML = profile;
      profileDiv.style.animation = 'none';
      // restart animation
      setTimeout(()=>{
        profileDiv.style.animation = '';
        profileDiv.style.opacity = 1;
        profileDiv.style.transform = "translateY(0)";
      }, 10);
    }, 150);

    // Highlight selected doctor
    document.querySelectorAll('.doctor-card-ui').forEach(card => card.classList.remove('active'));
    document.querySelector(`.doctor-card-ui[data-index="${idx}"]`).classList.add('active');
  }

  // Initial display
  showProfile(0);

  // On click, update card
  document.querySelectorAll('.doctor-card-ui').forEach((card, idx) => {
    card.addEventListener('click', () => showProfile(idx));
  });
});
</script>

  <script>
document.addEventListener('DOMContentLoaded', () => {
  const root = document.getElementById('clinic-gallery');
  if (!root) return;

  const track   = root.querySelector('.cg-track');
  const items   = [...root.querySelectorAll('.cg-item')];
  const prevBtn = root.querySelector('.cg-prev');
  const nextBtn = root.querySelector('.cg-next');
  const dotsWrap= root.querySelector('.cg-dots');

  // Build dots
  dotsWrap.innerHTML = items.map((_,i)=>`<button aria-label="Go to slide ${i+1}" data-i="${i}"></button>`).join('');
  const dots = [...dotsWrap.querySelectorAll('button')];

  let current = 0;
  const visible = [-2,-1,0,1,2]; // slots around center

  function render(){
    items.forEach(el => el.className = 'cg-item'); // reset classes
    items.forEach((el, i) => {
      const delta = i - current;
      const wrap = ((delta + items.length) % items.length);
      const shortest = wrap > items.length/2 ? wrap - items.length : wrap; // -N..+N
      if (visible.includes(shortest)) el.classList.add(`cg-pos${shortest}`);
    });
    dots.forEach((d,i)=> d.classList.toggle('active', i === current));
  }

  function next(){ current = (current + 1) % items.length; render(); }
  function prev(){ current = (current - 1 + items.length) % items.length; render(); }

  // Init
  render();

  // Buttons
  nextBtn.addEventListener('click', next);
  prevBtn.addEventListener('click', prev);

  // Dots
  dotsWrap.addEventListener('click', (e)=>{
    const b = e.target.closest('button[data-i]');
    if (!b) return;
    current = +b.dataset.i;
    render();
  });

  // Autoplay + pause on hover / when tab hidden
  let timer;
  const start = () => (timer = setInterval(next, 3000));
  const stop  = () => timer && clearInterval(timer);
  start();
  root.addEventListener('mouseenter', stop);
  root.addEventListener('mouseleave', start);
  document.addEventListener('visibilitychange', () => document.hidden ? stop() : start());

  // Drag / swipe
  let dragging = false, sx = 0, dx = 0;
  const onDown = (e) => { dragging = true; dx = 0; sx = (e.touches?e.touches[0].clientX:e.clientX); track.style.transition='none'; };
  const onMove = (e) => {
    if (!dragging) return;
    const x = (e.touches?e.touches[0].clientX:e.clientX);
    dx = x - sx;
    track.style.transform = `translateX(${Math.max(-60, Math.min(60, dx)) * 0.3}px)`;
  };
  const onUp = () => {
    if (!dragging) return;
    track.style.transition=''; track.style.transform='';
    if (dx > 60) prev(); else if (dx < -60) next();
    dragging = false;
  };
  track.addEventListener('mousedown', onDown);
  track.addEventListener('mousemove', onMove);
  window.addEventListener('mouseup', onUp);
  track.addEventListener('touchstart', onDown, {passive:true});
  track.addEventListener('touchmove', onMove, {passive:true});
  track.addEventListener('touchend', onUp);

  // Lightbox
  const lb       = document.getElementById('cg-lightbox');
  const lbImg    = lb.querySelector('.cg-lb-img');
  const lbCap    = lb.querySelector('.cg-lb-caption');
  const lbCanvas = lb.querySelector('#cg-lb-canvas');
  const lbClose  = lb.querySelector('.cg-lb-close');
  const lbPrev   = lb.querySelector('.cg-lb-prev');
  const lbNext   = lb.querySelector('.cg-lb-next');
  const lbZBtns  = [...lb.querySelectorAll('.cg-lb-zo')];
  const lbReset  = lb.querySelector('.cg-lb-reset');

  function openLB(i){
    current = i; render();
    const el = items[current];
    const img = el.querySelector('img');
    lbImg.src = img.src;
    lbCap.textContent = el.dataset.title || img.alt || '';
    lb.classList.remove('cg-hidden');
    lb.setAttribute('aria-hidden','false');
    document.documentElement.style.overflow = 'hidden';
    scale=1; tx=0; ty=0; apply();
  }
  function closeLB(){
    lb.classList.add('cg-hidden');
    lb.setAttribute('aria-hidden','true');
    document.documentElement.style.overflow = '';
  }
  function lbNextFn(){ next(); openLB(current); }
  function lbPrevFn(){ prev(); openLB(current); }

  items.forEach((el,i)=> el.addEventListener('click', ()=> openLB(i)));
  lbClose.addEventListener('click', closeLB);
  lbNext.addEventListener('click', lbNextFn);
  lbPrev.addEventListener('click', lbPrevFn);
  lb.addEventListener('click', (e)=> { if (e.target === lb) closeLB(); });
  document.addEventListener('keydown', (e)=>{
    if (lb.classList.contains('cg-hidden')) return;
    if (e.key === 'Escape') closeLB();
    if (e.key === 'ArrowRight') lbNextFn();
    if (e.key === 'ArrowLeft')  lbPrevFn();
  });

  // Zoom / Pan
  let scale=1, tx=0, ty=0;
  function apply(){ lbImg.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`; }
  lbZBtns.forEach(b => b.addEventListener('click', ()=>{
    const dir = b.dataset.zo === '+' ? 0.2 : -0.2;
    scale = Math.max(1, Math.min(4, scale + dir)); apply();
  }));
  lbReset.addEventListener('click', ()=> { scale=1; tx=0; ty=0; apply(); });

  lbCanvas.addEventListener('wheel', (e)=>{
    e.preventDefault();
    const delta = e.deltaY < 0 ? 0.2 : -0.2;
    const prev = scale;
    scale = Math.max(1, Math.min(4, scale + delta));
    const rect = lbImg.getBoundingClientRect();
    const cx = e.clientX - rect.left - rect.width/2;
    const cy = e.clientY - rect.top  - rect.height/2;
    tx -= cx * (scale/prev - 1);
    ty -= cy * (scale/prev - 1);
    apply();
  }, {passive:false});

  let pan=false, sxp=0, syp=0;
  lbCanvas.addEventListener('pointerdown', (e)=>{ pan=true; lbCanvas.setPointerCapture(e.pointerId); sxp=e.clientX - tx; syp=e.clientY - ty; });
  lbCanvas.addEventListener('pointermove', (e)=>{ if(!pan) return; tx = e.clientX - sxp; ty = e.clientY - syp; apply(); });
  ['pointerup','pointercancel','pointerleave'].forEach(ev=> lbCanvas.addEventListener(ev, ()=> pan=false));
});
</script>
</body>
</html>

