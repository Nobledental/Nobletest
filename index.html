<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Noble Dental Nallagandla | Top Dental Clinic in Hyderabad</title>

  <!-- Favicon & Canonical -->
  <link rel="icon" type="image/png" href="/images/favicon.png" />
  <link rel="canonical" href="https://nobledentalnallagandla.in/" />

  <!-- SEO -->
  <meta name="description" content="Noble Dental Nallagandla offers expert dental services including implants, whitening, root canal, and emergency care in Hyderabad." />
  <meta name="keywords" content="Dental Clinic Hyderabad, Best Dentist Nallagandla, Teeth Whitening, Root Canal, Dental Implants, Emergency Dental Care" />
  <meta name="author" content="Noble Dental Nallagandla" />
  <meta name="robots" content="index, follow" />
  <meta name="theme-color" content="#0ea5a3" />
  <meta name="google-site-verification" content="REPLACE_WITH_YOUR_VERIFICATION_CODE" />

  <!-- Open Graph -->
  <meta property="og:title" content="Noble Dental Nallagandla - Best Dental Clinic in Hyderabad" />
  <meta property="og:description" content="Expert dental treatments including implants, whitening, root canals, and more in Hyderabad." />
  <meta property="og:image" content="https://nobledentalnallagandla.in/images/logo.png" />
  <meta property="og:url" content="https://nobledentalnallagandla.in/" />
  <meta property="og:type" content="website" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Noble Dental Nallagandla - Best Dental Clinic in Hyderabad" />
  <meta name="twitter:description" content="Expert dental care including dental implants, root canals, and teeth cleaning." />
  <meta name="twitter:image" content="https://nobledentalnallagandla.in/images/logo.png" />

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />

  <!-- AOS CSS -->
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />

  <!-- Main CSS -->
  <link rel="stylesheet" href="/style.css" />

  <!-- Preload hero video (keep only if it's above the fold and lightweight) -->
  <link rel="preload" as="video" href="/videos/blackhole.mp4" type="video/mp4" />

  <!-- Sitemap link should be in head -->
  <link rel="sitemap" type="application/xml" href="/sitemap.xml" />

  <!-- JSON-LD: Dentist -->
  <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@type": "Dentist",
  "name": "Noble Dental Nallagandla",
  "image": "https://nobledentalnallagandla.in/images/logo.png",
  "@id": "https://nobledentalnallagandla.in/",
  "url": "https://nobledentalnallagandla.in/",
  "telephone": "+91-8610425342",
  "priceRange": "₹₹",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "Nallagandla Main Road",
    "addressLocality": "Hyderabad",
    "addressRegion": "Telangana",
    "postalCode": "500019",
    "addressCountry": "IN"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": 17.473963,
    "longitude": 78.308185
  },
  "hasMap": "https://g.co/kgs/Lebjyvw",
  "openingHoursSpecification": [
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],
      "opens": "11:00",
      "closes": "22:00"
    },
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": "Sunday",
      "opens": "10:00",
      "closes": "15:00"
    }
  ],
  "sameAs": [
    "https://www.facebook.com/people/Noble-Dental-Careica/100087590145815/",
    "https://x.com/NobleDenta67864",
    "https://www.instagram.com/noble.dentalorg/",
    "https://www.justdial.com/Hyderabad/Noble-Dental-Care-Multispeciality-Dental-Clinic/040PXX40-XX40-230311104127-B8Q4_BZDET"
    ]
  }
  </script>

  <!-- Optional: Site SearchAction -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Noble Dental Nallagandla",
    "url": "https://nobledentalnallagandla.in/",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://nobledentalnallagandla.in/search?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>

<!-- Google Tag Manager + Consent Mode (place first in <head>) -->
<script>
  // Consent Mode v2 defaults (adjust to your policy)
  window.dataLayer = window.dataLayer || [];
  function gtag(){ dataLayer.push(arguments); }
  gtag('consent', 'default', {
    ad_storage: 'denied',
    ad_user_data: 'denied',
    ad_personalization: 'denied',
    analytics_storage: 'granted'  // set to 'denied' until accept if required
  });
</script>
<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-N7LJVS7T');
</script>
<!-- End Google Tag Manager -->

  <!-- ===== Header ===== -->
  <header class="site-header">
    <!-- Brand: logo first, name second -->
    <a href="/" class="brand" aria-label="Noble Dental Nallagandla home">
      <img src="images/dentalcare.nallagandla.png" alt="Noble Dental Clinic - Nallagandla logo" />
      <p class="brand-title"><span>Noble</span> Dental Care</p>
    </a>

    <!-- Nav (desktop pill / mobile drawer) -->
    <nav class="main-nav" aria-label="Primary">
      <ul class="nav-pill">
        <li><a href="/">Home</a></li>

        <!-- Specialities with SEO-friendly sublinks -->
        <li class="has-submenu">
          <!-- FIX: point to your specialities landing page -->
          <a href="/specialities/" aria-haspopup="true" aria-expanded="false" aria-controls="sp-submenu">
            Specialities <span class="caret" aria-hidden="true"></span>
          </a>
          <ul class="submenu" id="sp-submenu">
            <li><a href="/specialities/braces.html">Braces &amp; Orthodontics</a></li>
            <li><a href="/specialities/invisalign.html">Invisalign Clear Aligners</a></li>
            <li><a href="/specialities/extraction.html">Tooth Extraction</a></li>
            <li><a href="/specialities/root-canal.html">Root Canal Treatment</a></li>
            <li><a href="/specialities/fillings.html">Tooth Fillings</a></li>
            <li><a href="/specialities/crowns-bridges.html">Crowns &amp; Bridges</a></li>
            <li><a href="/specialities/implants.html">Dental Implants</a></li>
            <li><a href="/specialities/dentures.html">Dentures</a></li>
            <li><a href="/specialities/scaling-whitening.html">Scaling &amp; Teeth Whitening</a></li>
            <li><a href="/specialities/smile-design.html">Smile Designing</a></li>
            <li><a href="/specialities/gum-surgeries.html">Gum Surgeries</a></li>
            <li><a href="/specialities/kids-dentistry.html">Kids Dentistry</a></li>
            <li><a href="/specialities/pregnancy-dental-care.html">Pregnancy Dental Care</a></li>
          </ul>
        </li>

        <li><a href="#selfcare">Selfcare</a></li>
        <li><a href="#gallery">Gallery</a></li>
        <li><a href="#login">Patient Login</a></li>
        <li><a href="#team">Our Team</a></li>
        <li><a href="#about">Know More</a></li>
      </ul>
    </nav>

    <!-- Right cluster -->
    <div class="header-right">
      <div class="socials">
        <!-- Replace # with real profiles -->
        <a href="#" aria-label="YouTube"><i class='bx bxl-youtube' aria-hidden="true"></i></a>
        <a href="#" aria-label="GitHub"><i class='bx bxl-github' aria-hidden="true"></i></a>
        <a href="#" aria-label="LinkedIn"><i class='bx bxl-linkedin-square' aria-hidden="true"></i></a>
      </div>
      <button class="menu-toggle" aria-label="Open menu" aria-expanded="false">
        <i class='bx bx-menu' aria-hidden="true"></i>
      </button>
    </div>
  </header>

  <!-- ===== Hero ===== -->
  <section class="hero-background" id="top">
    <div class="blackhole-box" aria-label="Clinic highlight video">
      <!-- Add a poster image to improve perceived load -->
      <video class="blackhole-video" autoplay muted loop playsinline
             src="/videos/blackhole.mp4"
             poster="/images/hero-poster.jpg"
             aria-label="Dental care hero video">
      </video>
    </div>

    <!-- FIX: brand consistency -->
    <div class="hero-info-title"><i class='bx bxl-sketch' aria-hidden="true"></i> Noble Dental Care</div>

    <!-- Single H1 for SEO -->
    <h1 class="hero-heading" data-aos="fade-right" data-aos-duration="1400">
      Providing <span class="gradient">the best</span> Dental Care <span class="gradient">Experience</span>
    </h1>

    <p class="hero-sub">Meet our team of experts with advanced treatment standards.</p>

    <div class="hero-buttons">
      <a href="https://wa.me/918610425342" target="_blank" rel="noopener noreferrer" class="hero-button whatsapp"><i class='bx bxl-whatsapp' aria-hidden="true"></i> WhatsApp</a>
      <a href="tel:+918610425342" class="hero-button call"><i class='bx bxs-phone' aria-hidden="true"></i> Call</a>
      <a href="mailto:nobledental.org@gmail.com" class="hero-button mail"><i class='bx bx-envelope' aria-hidden="true"></i> Mail</a>
      <a href="https://g.co/kgs/Lebjyvw" target="_blank" rel="noopener noreferrer" class="hero-button location"><i class='bx bx-map' aria-hidden="true"></i> Location</a>
    </div>

    <div class="scroll-down" aria-hidden="true"></div>
  </section>

<!-- ===== Services / Treatments We Offer (2025 redesign) ===== -->
<section class="info-section services-2025 svc s25" id="services">
  <div class="container">
    <div class="svc-box">
      <header class="services-head">
        <div class="eyebrow">Treatments</div>
        <h2 class="section-title">Treatments We Offer</h2>
        <p class="section-sub">Explore evidence-based care—from simple cleanings to advanced implant &amp; smile rehab.</p>
      </header>

      <!-- Controls -->
      <form class="services-controls" role="search" aria-label="Filter treatments" onsubmit="return false;">
        <label class="field search">
          <i class='bx bx-search' aria-hidden="true"></i>
          <input id="svcSearch" type="search" inputmode="search" autocomplete="off"
                 placeholder="Search treatments (e.g., implants, pain, kids, braces)…" />
        </label>

        <label class="field select">
          <i class='bx bx-filter-alt' aria-hidden="true"></i>
          <select id="svcCategory" aria-label="Filter by topic">
            <option value="all">All topics</option>
            <option value="Tooth Alignment">Tooth Alignment</option>
            <option value="Tooth Saving">Tooth Saving</option>
            <option value="Implants & Replacement">Implants & Replacement</option>
            <option value="Cosmetic & Smile">Cosmetic & Smile</option>
            <option value="Oral Surgery">Oral Surgery</option>
            <option value="Kids & Family">Kids & Family</option>
            <option value="Periodontics">Gum & Periodontics</option>
            <option value="Diagnostics">Diagnostics</option>
            <option value="Sedation & Sleep">Sedation & Sleep</option>
            <option value="Special Care">Special Care</option>
            <option value="Prosthodontics">Prosthodontics</option>
          </select>
        </label>

        <!-- Quick topics (chips) -->
        <div class="chip-row" aria-label="Quick topics">
          <button class="chip" type="button" data-chip="implants">Implants</button>
          <button class="chip" type="button" data-chip="root canal">Root canal</button>
          <button class="chip" type="button" data-chip="braces">Braces</button>
          <button class="chip" type="button" data-chip="kids">Kids</button>
          <button class="chip" type="button" data-chip="whitening">Whitening</button>
        </div>
      </form>

      <!-- Results -->
      <div class="cards-container">
        <div id="treatmentsStatus" class="results-status" aria-live="polite"></div>
        <section id="treatmentsGrid" class="treatments-grid" aria-live="polite" aria-busy="false"></section>

        <!-- Pagination (6 per page) -->
        <nav class="treatments-pagination" aria-label="Treatments pages">
          <button id="pgPrev" class="pg-btn ripple" type="button" aria-label="Previous page" disabled>
            <i class='bx bx-chevron-left'></i>
          </button>
          <div id="pgDots" class="pg-dots" role="list"></div>
          <button id="pgNext" class="pg-btn ripple" type="button" aria-label="Next page" disabled>
            <i class='bx bx-chevron-right'></i>
          </button>
        </nav>
      </div>
    </div>
  </div>
</section>

/* Doctors Dashboard — minimal module wired to your data-dd hooks */
(() => {
  const CURRENT_YEAR = new Date().getFullYear();
  const BOOK_COVER = "https://limasy.com/limcms/uploads/products/triumphs-complete-review-of-dentistry-2-volume-set_1709201366_22611.png";

  const DOCTORS = [
    { id:"dhivakaran", name:"Dr Dhivakaran", rating:4.9,
      specialty:"Chief Medical Director, Noble Dental Care · Director, Healthflo",
      expertise:["CMD — Noble Dental Care","Director — Healthflo (557 hospitals)","Networks: Bengaluru, Chennai, Hyderabad, TN, Mumbai, Delhi, Indore, Pune, AP"],
      experience:{startYear:CURRENT_YEAR-10},
      bio:"Dental leader focused on seamless, outcome‑driven care across India via Noble Dental Care and Healthflo.",
      phones:["8610425342","8074512305"],
      consultation:["Walk‑in","Appointment Booking","Tele‑consultation"],
      cities:["Nallagandla","Tellapur","Lingampally","Serilingampally","Gopanpally"],
      books:[{title:"Triumph’s Complete Review of Dentistry (2 Vol Set), Ed. 1",cover:BOOK_COVER,link:"https://play.google.com/store/books/details/Triumph_s_Complete_Review_of_Dentistry?id=ZTjvDwAAQBAJ&hl=en_US&pli=1",publisher:"Wolters Kluwer · Oct 2018"}],
      avatar:"https://i.imgur.com/1X5v8X2.png"},
    { id:"roger", name:"Dr Roger Ronaldo", rating:4.8,
      specialty:"Consultant Oral & Maxillofacial Surgeon — Implantology, Facial Reconstruction",
      expertise:["Implantology","Orthognathic & Reconstruction","Trauma Surgery"],
      experience:{startYear:CURRENT_YEAR-13},
      bio:"Precision implantology and reconstructive care with calm, clear guidance.",
      phones:["8610425342","8074512305"],
      consultation:["Appointment Booking","Tele‑consultation"],
      cities:["Nallagandla","Tellapur","Lingampally"],
      books:[{title:"Triumph’s Complete Review of Dentistry (2 Vol Set), Ed. 1",cover:BOOK_COVER,link:"https://play.google.com/store/books/details/Triumph_s_Complete_Review_of_Dentistry?id=ZTjvDwAAQBAJ&hl=en_US&pli=1",publisher:"Wolters Kluwer · Oct 2018"}],
      avatar:"https://i.imgur.com/7M2Qm1W.png"},
    { id:"thikvijay", name:"Dr Thik Vijay", rating:4.6,
      specialty:"FMC., (Germany) — Trichology, Aesthetic & Medical Cosmetology (ISHR)",
      expertise:["Trichology","Aesthetic & Medical Cosmetology","Hair & Scalp Restoration"],
      experience:{startYear:CURRENT_YEAR-11},
      bio:"Evidence‑based trichology and aesthetic treatments with natural finish.",
      phones:["8610425342","8074512305"],
      consultation:["Appointment Booking","Tele‑consultation"],
      cities:["Lingampally","Serilingampally"],
      books:[], avatar:"https://i.imgur.com/y6w2m8a.png"},
    { id:"deepak", name:"Dr Deepak", rating:4.7,
      specialty:"Orthodontist (Assistant Professor)",
      expertise:["Orthodontics","Smile Design & Aligners","Complex Malocclusion"],
      experience:{startYear:CURRENT_YEAR-10},
      bio:"Academic orthodontist crafting balanced smiles with modern appliances.",
      phones:["8610425342","8074512305"],
      consultation:["Appointment Booking","Tele‑consultation"],
      cities:["Tellapur","Gopanpally"], books:[], avatar:"https://i.imgur.com/1X5v8X2.png"},
    { id:"manoj", name:"Dr Manoj Reddy", rating:4.5,
      specialty:"Oral & Maxillofacial Surgeon — Implantology",
      expertise:["Dental Implants","Maxillofacial Surgery","Full‑mouth Rehab"],
      experience:{startYear:CURRENT_YEAR-9},
      bio:"Implant and maxillofacial care focused on function and long‑term results.",
      phones:["8610425342","8074512305"],
      consultation:["Appointment Booking","Tele‑consultation"],
      cities:["Nallagandla","Serilingampally","Gopanpally"], books:[], avatar:"https://i.imgur.com/7M2Qm1W.png"},
    { id:"idhaya", name:"Dr Idhaya", rating:4.4,
      specialty:"General Dentistry · Health Insurance · Medical Tourism",
      expertise:["Preventive Dentistry","Insurance Advisory","Tourism Coordination"],
      experience:{startYear:CURRENT_YEAR-8},
      bio:"Friendly general dentist guiding families through care, insurance and travel.",
      phones:["8610425342","8074512305"],
      consultation:["Tele‑consultation"],
      cities:["Tellapur","Lingampally"], books:[], avatar:"https://i.imgur.com/y6w2m8a.png"}
  ];

  const qs  = (root, sel) => root.querySelector(sel);
  const qsa = (root, sel) => Array.from(root.querySelectorAll(sel));
  const starBadge = (r) => `★ ${r.toFixed(1)}`;
  const starsDetail = (r)=>{const f=Math.floor(r),h=r-f>=.5?1:0,e=5-f-h;return "★".repeat(f)+(h?"½":"")+"☆".repeat(e)+`  ${r.toFixed(1)}`;};
  const cityLink = (name)=>({
    Nallagandla:"https://maps.app.goo.gl/xWyPi9pwkcM6hjYRA",
    Tellapur:"https://maps.app.goo.gl/uxtsDV7hR6iCp5Uq8",
    Lingampally:"https://maps.app.goo.gl/LQDetRYN3ednqDLn7",
    Serilingampally:"https://maps.app.goo.gl/pLukMFtAPwzdoE9N8",
    Gopanpally:"https://maps.app.goo.gl/EhtpSoxcchtQxG8E9"
  }[name] || `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent('Best dentist in '+name)}`);

  const experienceLabel = (conf)=> conf?.startYear
    ? `${Math.max(0, new Date().getFullYear() - conf.startYear)} Years`
    : (conf?.baseYears ? `${conf.baseYears} Years` : "Years of Experience");

  function toLabel(h,m){const p=h>=12?"PM":"AM";const hr=((h+11)%12)+1;return `${hr.toString().padStart(2,"0")}:${m===0?"00":"30"} ${p}`;}
  function labelsEvery30min(start,end,wrap=false){
    const out=[]; const push=(h,m)=>out.push(toLabel(h,m));
    if(!wrap){for(let h=start;h<=end;h++){push(h,0); if(h!==end) push(h,30);}}
    else {for(let h=start;h<=23;h++){push(h,0); if(h<23) push(h,30);} for(let h=0;h<=end;h++){push(h,0); if(h<end) push(h,30);}}
    return out;
  }

  function renderSlots(root){
    const reg = qs(root,'[data-dd="timeSlotsRegular"]');
    const eme = qs(root,'[data-dd="timeSlotsEmergency"]');
    const sel = qs(root,'[data-dd="timeSelect"]');
    const regular=labelsEvery30min(11,22,false);
    const emergency=labelsEvery30min(22,2,true);

    const render = (container, labels, emergency=false)=>{
      container.innerHTML="";
      labels.forEach(lbl=>{
        const b=document.createElement('button');
        b.type='button'; b.className='dd-slot'+(emergency?' dd-slot--emergency':''); b.textContent=lbl;
        b.addEventListener('click',()=>{
          qsa(root,'.dd-slot').forEach(x=>x.classList.remove('dd-active'));
          b.classList.add('dd-active'); sel.value=lbl;
        });
        container.appendChild(b);
      });
    };
    render(reg,regular,false); render(eme,emergency,true);

    sel.innerHTML=""; [...regular,...emergency].forEach(lbl=>{
      const o=document.createElement('option'); o.value=o.textContent=lbl; sel.appendChild(o);
    });
    sel.addEventListener('change',()=>{
      const chosen=sel.value;
      qsa(root,'.dd-slot').forEach(s=>s.classList.toggle('dd-active', s.textContent===chosen));
    });
    sel.selectedIndex=0; qs(root,'.dd-slot')?.classList.add('dd-active');
  }

  function fillProfile(root, doc){
    // header
    qs(root,'[data-dd="docAvatar"]').src = doc.avatar;
    qs(root,'[data-dd="docNameTop"]').textContent = doc.name;
    qs(root,'[data-dd="docSpecialtyTop"]').textContent = doc.specialty;
    qs(root,'[data-dd="docRatingPill"]').textContent = starBadge(doc.rating);
    // hero image
    const img = qs(root,'[data-dd="docImage"]'); img.src = doc.avatar; img.alt = `${doc.name} portrait`;
    // caption
    qs(root,'[data-dd="docName"]').textContent = doc.name;
    qs(root,'[data-dd="docBio"]').textContent = doc.bio;
    // facts
    qs(root,'[data-dd="docExperience"]').textContent = `Experience: ${experienceLabel(doc.experience)}`;
    qs(root,'[data-dd="docConsultation"]').textContent = doc.consultation.join(" · ");
    // cities + phones
    qs(root,'[data-dd="docCities"]').innerHTML = doc.cities.map(c=>`<a class="dd-chip" href="${cityLink(c)}" target="_blank" rel="noopener" title="Best dentist in ${c}">${c}</a>`).join(" ");
    qs(root,'[data-dd="docPhones"]').innerHTML = doc.phones.map(n=>`<a class="dd-chip" href="tel:${n.replace(/\s+/g,'')}">${n}</a>`).join(" ");
    // about + expertise + books
    qs(root,'[data-dd="docBioFull"]').textContent = `${doc.bio} — Rating: ${starsDetail(doc.rating)}`;
    const expList = qs(root,'[data-dd="docExpertise"]'); expList.innerHTML=""; doc.expertise.forEach(x=>{const li=document.createElement('li'); li.textContent=x; expList.appendChild(li);});
    const books = qs(root,'[data-dd="docBooks"]'); books.innerHTML="";
    if (doc.books.length){
      doc.books.forEach(b=>{
        const tile=document.createElement('div');
        tile.className='dd-book-tile';
        tile.innerHTML = `<img src="${b.cover}" alt="${b.title} cover"><a href="${b.link}" target="_blank" rel="noopener">${b.title}</a><div class="dd-small">${b.publisher||""}</div>`;
        books.appendChild(tile);
      });
    } else { books.innerHTML = `<p class="dd-muted">No books added yet.</p>`; }

    // actions
    qs(root,'[data-dd="callBtn"]').onclick = ()=> window.location.href = `tel:${doc.phones[0]}`;
    const citiesModal = qs(root,'[data-dd="citiesModal"]');
    const citiesList  = qs(root,'[data-dd="citiesList"]');
    const openMapsBtn = qs(root,'[data-dd="openMapsBtn"]');
    const closeModalBtn = qs(root,'[data-dd="closeModalBtn"]');
    qs(root,'[data-dd="openCities"]').onclick = ()=>{
      citiesList.innerHTML = doc.cities.map(c=>`<li><a href="${cityLink(c)}" target="_blank" rel="noopener">${c}</a></li>`).join("");
      openMapsBtn.onclick = ()=> window.open(cityLink(doc.cities[0]),'_blank');
      citiesModal.showModal();
    };
    closeModalBtn.onclick = ()=> citiesModal.close();
  }

  function renderList(root){
    const wrap = qs(root,'[data-dd="doctorsList"]');
    const fallback = qs(root,'[data-dd="listFallback"]');
    wrap.innerHTML="";
    DOCTORS.forEach(doc=>{
      const card=document.createElement('article');
      card.className='dd-card'; card.dataset.id=doc.id;
      card.innerHTML = `
        <div class="dd-avatar"><img src="${doc.avatar}" alt="${doc.name}"></div>
        <div class="dd-card-body">
          <h3 class="dd-card-title" title="${doc.name}">${doc.name}</h3>
          <div class="dd-card-rating">${starBadge(doc.rating)}</div>
        </div>
        <div class="dd-card-actions">
          <button class="dd-icon-btn" data-action="call" title="Call">Call</button>
          <button class="dd-icon-btn" data-action="map"  title="Map">Map</button>
          <button class="dd-icon-btn" data-action="select" title="View">View</button>
        </div>`;
      wrap.appendChild(card);
    });
    fallback.hidden = true;

    wrap.addEventListener('click',(e)=>{
      const card = e.target.closest('.dd-card'); if(!card) return;
      const doc = DOCTORS.find(d=>d.id===card.dataset.id); if(!doc) return;
      const act = e.target.dataset.action;
      if (act === 'call'){ window.location.href = `tel:${doc.phones[0]}`; return; }
      if (act === 'map'){
        const modal = qs(root,'[data-dd="citiesModal"]');
        const list  = qs(root,'[data-dd="citiesList"]');
        const btn   = qs(root,'[data-dd="openMapsBtn"]');
        list.innerHTML = doc.cities.map(c=>`<li><a href="${cityLink(c)}" target="_blank" rel="noopener">${c}</a></li>`).join("");
        btn.onclick = ()=> window.open(cityLink(doc.cities[0]),'_blank');
        modal.showModal(); return;
      }
      qs(root,'[data-dd="doctorSelect"]').value = doc.id;
      fillProfile(root, doc);
      const t = qs(root,'[data-dd="toast"]'); t.textContent = `${doc.name} selected`; t.classList.add('dd-show'); setTimeout(()=>t.classList.remove('dd-show'), 2200);
    });
  }

  function renderSelect(root){
    const sel = qs(root,'[data-dd="doctorSelect"]');
    sel.innerHTML=""; DOCTORS.forEach(d=>{ const o=document.createElement('option'); o.value=d.id; o.textContent=d.name; sel.appendChild(o); });
    sel.addEventListener('change', ()=>{ const d=DOCTORS.find(x=>x.id===sel.value); if(d) fillProfile(root,d); });
  }

  function bindConfirm(root){
    qs(root,'[data-dd="confirmBtn"]').addEventListener('click', ()=>{
      const sel = qs(root,'[data-dd="doctorSelect"]');
      const doc = DOCTORS.find(d=>d.id===sel.value);
      const date = qs(root,'[data-dd="appointmentDate"]').value || "";
      const time = qs(root,'[data-dd="timeSelect"]').value || "";
      const name = (qs(root,'[data-dd="patientName"]').value||"").trim();
      const age  = (qs(root,'[data-dd="patientAge"]').value||"").trim();
      const type = qs(root,'[data-dd="appointmentType"]').value;
      const notes= (qs(root,'[data-dd="reason"]').value||"").trim();

      const toast = (m)=>{const t=qs(root,'[data-dd="toast"]');t.textContent=m;t.classList.add('dd-show');setTimeout(()=>t.classList.remove('dd-show'),2200);};
      if(!doc) return toast("Please select a doctor.");
      if(!name) return toast("Please enter patient name.");
      if(!age)  return toast("Please enter age.");
      if(!date||!time) return toast("Please choose date & time.");

      const summary = `Appointment Request
Doctor: ${doc.name}
Type: ${type}
Patient: ${name} (Age ${age})
Date: ${date}
Time: ${time}
Phone(s): ${doc.phones.join(', ')}
City Options: ${doc.cities.join(', ')}

Notes: ${notes}`;

      const subject = `Appointment: ${type} | ${name} | ${date} ${time}`;
      const mailto  = `mailto:dr.dhivakaran@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(summary)}`;
      window.open(mailto,'_blank');

      const waNumber="91861425342";
      const waLink=`https://wa.me/${waNumber}?text=${encodeURIComponent("Hello, I'd like to confirm an appointment.\n\n"+summary)}`;
      window.open(waLink,'_blank');

      toast("Appointment info prepared in Email & WhatsApp.");
    });

    // middle-panel quick call
    qs(root,'[data-dd="callBtnMiddle"]').addEventListener('click', ()=>{
      const doc = DOCTORS.find(d=>d.id===qs(root,'[data-dd="doctorSelect"]').value);
      window.location.href = `tel:${(doc?.phones?.[0]||'8610425342')}`;
    });
  }

  function init(){
    const root = document.querySelector('#doctorDashboard'); if(!root) return console.error('DoctorDashboard: #doctorDashboard not found');
    renderSlots(root); renderList(root); renderSelect(root);
    const first = DOCTORS[0]; qs(root,'[data-dd="doctorSelect"]').value = first.id; fillProfile(root, first);
    bindConfirm(root);
  }

  // run after DOM
  document.addEventListener('DOMContentLoaded', init, { once:true });
})();
</script>

  <!-- ===== Footer ===== -->
  <footer class="site-footer">
    <p>© <span id="year"></span> Noble Dental Nallagandla. All rights reserved.</p>
  </footer>

  <!-- AOS + Main JS -->
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js" defer></script>
  <script>
    // ---- Init AOS
    window.addEventListener('load', () => {
      if (window.AOS) AOS.init({ once: true });
    });

    // ---- Helpers
    const $ = (sel, root = document) => root.querySelector(sel);
    const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));

    // ---- Mobile menu toggle + close on outside/Escape
    const menuBtn = $('.menu-toggle');
    const nav = $('.main-nav');
    if (menuBtn && nav) {
      menuBtn.addEventListener('click', () => {
        const open = nav.classList.toggle('open');
        menuBtn.setAttribute('aria-expanded', open ? 'true' : 'false');
        document.body.classList.toggle('nav-open', open);
      });

      document.addEventListener('click', (e) => {
        if (nav.classList.contains('open') && !nav.contains(e.target) && !menuBtn.contains(e.target)) {
          nav.classList.remove('open');
          menuBtn.setAttribute('aria-expanded', 'false');
          document.body.classList.remove('nav-open');
        }
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && nav.classList.contains('open')) {
          nav.classList.remove('open');
          menuBtn.setAttribute('aria-expanded', 'false');
          document.body.classList.remove('nav-open');
        }
      });
    }

    // ---- Mobile submenu toggle for Specialities (keeps desktop link working)
    const spItem = $('.has-submenu');
    const spToggle = $('.has-submenu > a');
    if (spItem && spToggle) {
      const toggleSub = (e) => {
        const isMobile = window.matchMedia('(max-width: 900px)').matches;
        const navOpen = $('.main-nav')?.classList.contains('open');
        if (isMobile || navOpen) {
          e.preventDefault();
          const open = spItem.classList.toggle('open-submenu');
          spToggle.setAttribute('aria-expanded', open ? 'true' : 'false');
        }
      };
      spToggle.addEventListener('click', toggleSub);
      spToggle.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          toggleSub(e);
        }
      });
      document.addEventListener('click', (e) => {
        if (!spItem.contains(e.target)) {
          spItem.classList.remove('open-submenu');
          spToggle.setAttribute('aria-expanded', 'false');
        }
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          spItem.classList.remove('open-submenu');
          spToggle.setAttribute('aria-expanded', 'false');
        }
      });
    }

    // ---- Footer year
    const yearEl = document.getElementById('year');
    if (yearEl) yearEl.textContent = new Date().getFullYear();
  </script>

  <script>
/* ===== Treatments data + renderer (6 per page) ===== */
(() => {
  const $  = (s, r=document)=>r.querySelector(s);
  const $$ = (s, r=document)=>Array.from(r.querySelectorAll(s));

  const grid   = $('#treatmentsGrid');
  const status = $('#treatmentsStatus');
  const search = $('#svcSearch');
  const catSel = $('#svcCategory');
  const chips  = $$('.chip');
  const prevBtn= $('#pgPrev');
  const nextBtn= $('#pgNext');
  const dots   = $('#pgDots');

  if (!grid) return;

  /* ---------- DATA (from your list) ---------- */
  const TREATMENTS = [
    // Tooth Alignment
    {id:'braces', title:'Braces & Aligners', category:'Tooth Alignment',
      keywords:'braces aligners orthodontic crooked bite noble invisalign',
      desc:'Metal braces and clear aligners (including certified Invisalign) for a confident, aligned smile.',
      url:'/specialities/braces.html', img:'https://via.placeholder.com/800x500?text=Braces+%26+Aligners'},
    {id:'invisalign', title:'Invisalign / Clear Aligners', category:'Tooth Alignment',
      keywords:'invisible clear trays esthetic teen adult inman aligners',
      desc:'Nearly invisible trays that straighten teeth comfortably with minimal lifestyle disruption.',
      url:'/specialities/invisalign.html', img:'https://via.placeholder.com/800x500?text=Invisalign+%2F+Clear+Aligners'},
    {id:'inman', title:'Inman Aligners', category:'Tooth Alignment',
      keywords:'inman aligner fast alignment front teeth',
      desc:'A rapid option for minor front-teeth alignment using a removable spring aligner.',
      url:'/specialities/invisalign.html', img:'https://via.placeholder.com/800x500?text=Inman+Aligner'},
    {id:'orthodontics', title:'Orthodontic Treatment', category:'Tooth Alignment',
      keywords:'crowded teeth spacing bite correction growth jaw orthodontist',
      desc:'Diagnosis & correction of crowding, spacing and bite issues for long-term oral health.',
      url:'/specialities/braces.html', img:'https://via.placeholder.com/800x500?text=Orthodontic+Treatment'},
    {id:'invisible-orthodontics', title:'Invisible Orthodontics', category:'Tooth Alignment',
      keywords:'invisible braces ceramic clear aligners esthetics',
      desc:'Esthetic braces and ceramic options for discreet tooth movement.',
      url:'/specialities/braces.html', img:'https://via.placeholder.com/800x500?text=Invisible+Orthodontics'},

    // Tooth Saving
    {id:'rct', title:'Root Canal Treatment', category:'Tooth Saving',
      keywords:'root canal pain infection decay endodontic save tooth',
      desc:'Removes infected tissue, relieves pain and saves your natural tooth with precise care.',
      url:'/specialities/root-canal.html', img:'https://via.placeholder.com/800x500?text=Root+Canal+Treatment'},
    {id:'fillings', title:'Restorations & Fillings', category:'Tooth Saving',
      keywords:'filling composite gic caries cavity restoration inlays onlays',
      desc:'Tooth-coloured composites and aesthetic restorations to restore form and function.',
      url:'/specialities/fillings.html', img:'https://via.placeholder.com/800x500?text=Restorations+%26+Fillings'},
    {id:'trauma', title:'Dental Trauma Care', category:'Tooth Saving',
      keywords:'fracture chipped avulsed knocked emergency splint',
      desc:'Rapid care for chipped, fractured or avulsed teeth to maximize survival.',
      url:'/specialities/emergency.html', img:'https://via.placeholder.com/800x500?text=Dental+Trauma+Care'},

    // Implants & Replacement
    {id:'implants', title:'Dental Implants', category:'Implants & Replacement',
      keywords:'dental implants titanium tooth replacement missing teeth crowns bridges',
      desc:'Titanium implants replace missing roots and support natural-looking crowns or bridges.',
      url:'/specialities/implants.html', img:'https://via.placeholder.com/800x500?text=Dental+Implants'},
    {id:'all-on-4', title:'All-on-4® Dental Treatment', category:'Implants & Replacement',
      keywords:'full arch fixed teeth immediate loading all on four',
      desc:'Four implants supporting a full-arch fixed bridge—confidence and comfort restored.',
      url:'/specialities/implants.html', img:'https://via.placeholder.com/800x500?text=All-on-4+Full+Arch'},
    {id:'zygomatic', title:'Zygoma Implants', category:'Implants & Replacement',
      keywords:'zygoma implant atrophic maxilla no bone graft',
      desc:'Solution for severe upper-jaw bone loss—zygomatic anchorage avoids hipbone grafts.',
      url:'/specialities/implants.html', img:'https://via.placeholder.com/800x500?text=Zygoma+Implants'},
    {id:'sinus-lift', title:'Sinus Lift Surgery', category:'Implants & Replacement',
      keywords:'sinus lift augmentation graft posterior maxilla',
      desc:'Adds bone in the upper jaw to enable predictable implant placement.',
      url:'/specialities/implants.html', img:'https://via.placeholder.com/800x500?text=Sinus+Lift+Surgery'},
    {id:'bone-graft', title:'Bone Grafting Procedures', category:'Implants & Replacement',
      keywords:'bone graft ridge preservation augmentation implant site',
      desc:'Builds support where bone is thin—improving long-term implant success.',
      url:'/specialities/implants.html', img:'https://via.placeholder.com/800x500?text=Bone+Grafting'},
    {id:'semi-fixed-dentures', title:'Semi-fixed Dentures (Implant Overdentures)', category:'Implants & Replacement',
      keywords:'overdenture locator implant denture stability retention',
      desc:'Implant-retained dentures for excellent fit, stability and everyday confidence.',
      url:'/specialities/dentures.html', img:'https://via.placeholder.com/800x500?text=Implant+Overdenture'},
    {id:'advanced-implant', title:'Advanced Implant Therapy', category:'Implants & Replacement',
      keywords:'full mouth implants immediate load complex rehab',
      desc:'Comprehensive implant solutions for complex cases and full-mouth rehabilitation.',
      url:'/specialities/implants.html', img:'https://via.placeholder.com/800x500?text=Advanced+Implant+Therapy'},
    {id:'crowns-bridges', title:'Crowns & Bridges', category:'Implants & Replacement',
      keywords:'crown bridge fixed artificial teeth prosthodontics',
      desc:'Strengthen damaged teeth or replace missing teeth with precise fixed prosthetics.',
      url:'/specialities/crowns-bridges.html', img:'https://via.placeholder.com/800x500?text=Crowns+%26+Bridges'},
    {id:'dentures', title:'Dentures (Removable & Implant-supported)', category:'Implants & Replacement',
      keywords:'complete denture partial cast metal flexible implant supported',
      desc:'Acrylic, cast-metal, flexible and implant-supported options for comfort and function.',
      url:'/specialities/dentures.html', img:'https://via.placeholder.com/800x500?text=Dentures'},

    // Cosmetic & Smile
    {id:'smile-makeover', title:'Smile Makeover', category:'Cosmetic & Smile',
      keywords:'smile makeover veneers whitening bonding esthetics celebrity smile design',
      desc:'Customized combo—veneers, whitening & alignment—for a radiant, confident smile.',
      url:'/specialities/smile-design.html', img:'https://via.placeholder.com/800x500?text=Smile+Makeover'},
    {id:'veneers', title:'Dental Veneers', category:'Cosmetic & Smile',
      keywords:'porcelain veneer laminate minimal prep esthetic',
      desc:'Ultra-thin shells to refine shape, colour and symmetry with minimal preparation.',
      url:'/specialities/smile-design.html', img:'https://via.placeholder.com/800x500?text=Dental+Veneers'},
    {id:'whitening', title:'Teeth Whitening', category:'Cosmetic & Smile',
      keywords:'teeth whitening bleaching stains shade',
      desc:'Safe, effective brightening: in-clinic power whitening or take-home kits.',
      url:'/specialities/scaling-whitening.html', img:'https://via.placeholder.com/800x500?text=Teeth+Whitening'},
    {id:'gum-depig', title:'Gum Depigmentation', category:'Cosmetic & Smile',
      keywords:'dark gums laser depigmentation esthetic pink gums',
      desc:'Laser-assisted lightening for uniformly pink, healthy-looking gums.',
      url:'/specialities/gum-surgeries.html', img:'https://via.placeholder.com/800x500?text=Gum+Depigmentation'},
    {id:'laser-dentistry', title:'Laser Dentistry', category:'Cosmetic & Smile',
      keywords:'laser minimally invasive soft tissue healing',
      desc:'From gum contouring to ulcer relief—gentle, precise and quick healing.',
      url:'/specialities/gum-surgeries.html', img:'https://via.placeholder.com/800x500?text=Laser+Dentistry'},
    {id:'cosmetic-dentistry', title:'Cosmetic Dentistry', category:'Cosmetic & Smile',
      keywords:'esthetic smile design bonding colour shape',
      desc:'Modern cosmetic dentistry to enhance tooth shape, colour and proportions.',
      url:'/specialities/smile-design.html', img:'https://via.placeholder.com/800x500?text=Cosmetic+Dentistry'},
    {id:'smile-design', title:'Smile Design & Esthetics', category:'Cosmetic & Smile',
      keywords:'smile design veneers planning digital waxup',
      desc:'Solutions from teeth whitening to complex full-mouth smile rehabilitation.',
      url:'/specialities/smile-design.html', img:'https://via.placeholder.com/800x500?text=Smile+Design'},

    // Oral Surgery
    {id:'wisdom', title:'Wisdom Tooth Extractions', category:'Oral Surgery',
      keywords:'third molar surgical extraction pain swelling impaction',
      desc:'Removes painful/impacted third molars—prevents decay and gum inflammation.',
      url:'/specialities/extraction.html', img:'https://via.placeholder.com/800x500?text=Wisdom+Tooth+Extraction'},
    {id:'face-surgery', title:'Corrective Jaw (Orthognathic) / Face Surgery', category:'Oral Surgery',
      keywords:'jaw surgery bite correction profile tmj skeletal orthognathic',
      desc:'Improves bite, function and facial balance when jaw positions need correction.',
      url:'/specialities/face-surgery.html', img:'https://via.placeholder.com/800x500?text=Jaw+%2F+Face+Surgery'},

    // Kids & Family
    {id:'peds', title:'Pediatric Dentistry / Child Care', category:'Kids & Family',
      keywords:'kids child care pulpectomy crown sealants fluoride toys',
      desc:'Kid-friendly care: sealants, fillings, pulpectomy & crowns in a comforting setting.',
      url:'/specialities/kids-dentistry.html', img:'https://via.placeholder.com/800x500?text=Pediatric+Dentistry'},
    {id:'sealants', title:'Pit & Fissure Sealants', category:'Kids & Family',
      keywords:'preventive sealant cavity decay kids',
      desc:'Protective coating for cavity-prone grooves—simple, painless prevention.',
      url:'/specialities/kids-dentistry.html', img:'https://via.placeholder.com/800x500?text=Sealants'},

    // Periodontics
    {id:'scaling', title:'Scaling & Polishing', category:'Periodontics',
      keywords:'cleaning prophylaxis tartar plaque gum health fresh breath',
      desc:'Removes plaque & tartar and finishes with a polish for gum health and fresh breath.',
      url:'/specialities/scaling-whitening.html', img:'https://via.placeholder.com/800x500?text=Scaling+%26+Polishing'},
    {id:'gum-treat', title:'Gum Treatment', category:'Periodontics',
      keywords:'gingivitis periodontitis deep cleaning flap surgery pockets',
      desc:'Treats gum inflammation & bone loss—deep cleaning to regenerative surgery.',
      url:'/specialities/gum-surgeries.html', img:'https://via.placeholder.com/800x500?text=Gum+Treatment'},

    // Diagnostics
    {id:'ct-scan', title:'Dental CT Scan (CBCT)', category:'Diagnostics',
      keywords:'3d scan cbct implant planning endodontics tmj',
      desc:'3D imaging for precise diagnosis & surgical planning—see roots, nerves & bone.',
      url:'/specialities/diagnostics.html', img:'https://via.placeholder.com/800x500?text=Dental+CT+%28CBCT%29'},
    {id:'cancer-screen', title:'Oral Cancer Screening', category:'Diagnostics',
      keywords:'early detection oral cancer surgeon screening',
      desc:'Early detection saves lives—routine screening by our maxillofacial specialist.',
      url:'/specialities/oral-cancer.html', img:'https://via.placeholder.com/800x500?text=Oral+Cancer+Screening'},
    {id:'tmj', title:'TMJ Problems', category:'Diagnostics',
      keywords:'tmj jaw joint clicking pain dysfunction splint',
      desc:'Evaluation and conservative care for jaw joint pain, clicking and movement issues.',
      url:'/specialities/tmj.html', img:'https://via.placeholder.com/800x500?text=TMJ+Care'},

    // Sedation & Sleep
    {id:'iv-sedation', title:'IV Sedation (Conscious)', category:'Sedation & Sleep',
      keywords:'iv sedation twilight dentistry anxious phobia day care',
      desc:'Relaxed, semi-awake care with amnesia—ideal for long or anxiety-provoking visits.',
      url:'/specialities/sedation.html', img:'https://via.placeholder.com/800x500?text=IV+Sedation'},
    {id:'general-anesthesia', title:'General Anesthesia', category:'Sedation & Sleep',
      keywords:'general anesthesia pediatric special needs hospital',
      desc:'One-visit completion for extensive pediatric/special cases under hospital settings.',
      url:'/specialities/sedation.html', img:'https://via.placeholder.com/800x500?text=General+Anesthesia'},
    {id:'sleep-dentistry', title:'Snoring Remedies & Sleep Dentistry', category:'Sedation & Sleep',
      keywords:'snoring osa sleep apnea oral splints',
      desc:'Custom oral appliances and pathways for snoring and obstructive sleep apnea.',
      url:'/specialities/sleep-dentistry.html', img:'https://via.placeholder.com/800x500?text=Sleep+Dentistry'},

    // Special Care
    {id:'pregnancy', title:'Pregnancy Dental Care', category:'Special Care',
      keywords:'pregnancy trimester safe protocols mom baby',
      desc:'Trimester-wise safe protocols for mom & baby—preventive and urgent care.',
      url:'/specialities/pregnancy-dental-care.html', img:'https://via.placeholder.com/800x500?text=Pregnancy+Dental+Care'},
    {id:'diabetic', title:'Diabetic Dental Care', category:'Special Care',
      keywords:'diabetes gum infection healing sugar control',
      desc:'Tailored gum care, infection control and healing support for diabetics.',
      url:'/specialities/diabetic-dental-care.html', img:'https://via.placeholder.com/800x500?text=Diabetic+Dental+Care'},
    {id:'geriatric', title:'Geriatric Dentistry', category:'Special Care',
      keywords:'elderly dentures dry mouth root caries caregiver',
      desc:'Comfort-first care for seniors—denture tuning, root-caries prevention & home tips.',
      url:'/specialities/geriatric.html', img:'https://via.placeholder.com/800x500?text=Geriatric+Dentistry'},
    {id:'home-care', title:'Home Dental Care', category:'Special Care',
      keywords:'home visit bedside immobilized special needs',
      desc:'Clinical-grade care at home for immobile/special-needs patients (by appointment).',
      url:'/specialities/home-care.html', img:'https://via.placeholder.com/800x500?text=Home+Dental+Care'},
    {id:'emergency', title:'Emergency Dental Care', category:'Special Care',
      keywords:'emergency pain swelling trauma broken tooth',
      desc:'Same-day attention for pain, swelling or dental injuries.',
      url:'/specialities/emergency.html', img:'https://via.placeholder.com/800x500?text=Emergency+Dental+Care'},

    // Prosthodontics
    {id:'fmr', title:'Full Mouth Rehabilitation', category:'Prosthodontics',
      keywords:'full mouth rehabilitation missing teeth bite rebuild',
      desc:'Restores all missing/affected teeth to rebuild chewing, comfort and smile.',
      url:'/specialities/crowns-bridges.html', img:'https://via.placeholder.com/800x500?text=Full+Mouth+Rehabilitation'},
    {id:'fixed-teeth', title:'Fixed Artificial Teeth', category:'Prosthodontics',
      keywords:'fixed teeth bridges implant crowns',
      desc:'Strong, natural-looking fixed teeth using bridges and/or implants.',
      url:'/specialities/crowns-bridges.html', img:'https://via.placeholder.com/800x500?text=Fixed+Artificial+Teeth'}
  ];

  /* ---------- Logic ---------- */
  const PAGE_SIZE = 6;
  let filtered = TREATMENTS.slice();
  let page = 1;

  const norm = s => (s||'').toLowerCase();
  const score = (it, q, cat) => {
    if (!q && (cat==='all' || cat===it.category)) return 0.0001;
    const hay = `${it.title} ${it.keywords} ${it.desc} ${it.category}`.toLowerCase();
    const terms = q.split(/[\s,]+/).filter(Boolean).map(norm);
    let s = 0;
    terms.forEach(t=>{
      if (it.title.toLowerCase().includes(t)) s += 5;
      if (it.keywords.toLowerCase().includes(t)) s += 3;
      if (hay.includes(t)) s += 1;
    });
    if (cat !== 'all' && it.category === cat) s += 2;
    return s;
  };

  const paginate = (arr, page, size) => {
    const start = (page-1)*size;
    return arr.slice(start, start+size);
  };

  function renderPagination(pageCount){
    prevBtn.disabled = page<=1;
    nextBtn.disabled = page>=pageCount;
    dots.innerHTML = '';
    for (let i=1;i<=pageCount;i++){
      const dot = document.createElement('button');
      dot.className = 'pg-dot';
      dot.type = 'button';
      dot.setAttribute('role','listitem');
      if (i===page) dot.setAttribute('aria-current','page');
      dot.addEventListener('click', ()=>{ page=i; render(); window.scrollTo({top: grid.offsetTop-120, behavior:'smooth'}); });
      dots.appendChild(dot);
    }
  }

  function render(){
    grid.setAttribute('aria-busy','true');
    grid.innerHTML = '';

    const pageCount = Math.max(1, Math.ceil(filtered.length / PAGE_SIZE));
    if (page > pageCount) page = pageCount;

    const items = paginate(filtered, page, PAGE_SIZE);

    if (!items.length){
      status.textContent = 'No treatments match your search—try broader terms (e.g., “implants”, “pain”, “kids”).';
      renderPagination(1);
      grid.setAttribute('aria-busy','false');
      return;
    }

    status.textContent = `${filtered.length} result${filtered.length>1?'s':''} — page ${page} of ${pageCount}`;

    const frag = document.createDocumentFragment();
    items.forEach(it=>{
      const card = document.createElement('article');
      card.className = 't-card ripple';
      card.setAttribute('data-id', it.id);
      card.setAttribute('data-category', it.category); 
      card.innerHTML = `
        <div class="t-media">
          <span class="t-badge">${it.category}</span>
          <img loading="lazy" src="${it.img}" alt="${it.title}">
        </div>
        <div class="t-body">
          <h3 class="t-title">${it.title}</h3>
          <p class="t-desc">${it.desc}</p>
          <div class="t-meta"><i class='bx bx-check-shield'></i> Noble Dental</div>
          <div class="t-actions">
            <a class="t-btn" href="${it.url}"><i class='bx bx-info-circle'></i> Learn more</a>
            <a class="t-btn secondary" href="tel:+918610425342"><i class='bx bxs-phone'></i> Call</a>
          </div>
        </div>
      `;
      // Android-like ripple origin
      card.addEventListener('pointerdown', (e)=>{
        const r = card.getBoundingClientRect();
        card.style.setProperty('--ripple-x', ((e.clientX-r.left)/r.width*100)+'%');
        card.style.setProperty('--ripple-y', ((e.clientY-r.top)/r.height*100)+'%');
      });
      frag.appendChild(card);
    });
    grid.appendChild(frag);

    renderPagination(pageCount);
    grid.setAttribute('aria-busy','false');
  }

  function apply(){
    const q = norm(search?.value || '');
    const cat = catSel?.value || 'all';
    const pool = (cat==='all') ? TREATMENTS.slice() : TREATMENTS.filter(it=>it.category===cat);

    if (!q){
      filtered = pool;
    } else {
      filtered = pool
        .map(it=>({it, s: score(it,q,cat)}))
        .filter(x=>x.s>0)
        .sort((a,b)=> b.s - a.s || a.it.title.localeCompare(b.it.title))
        .map(x=>x.it);
    }
    page = 1;
    render();
  }

  // Events
  let t;
  search?.addEventListener('input', ()=>{
    clearTimeout(t); t=setTimeout(apply, 160);
  });
  catSel?.addEventListener('change', apply);
  chips.forEach(ch => ch.addEventListener('click', ()=>{
    if (!search) return;
    search.value = ch.dataset.chip || '';
    apply();
    search.focus();
  }));

  prevBtn?.addEventListener('click', ()=>{ if (page>1){ page--; render(); } });
  nextBtn?.addEventListener('click', ()=>{ const pages=Math.ceil(filtered.length/PAGE_SIZE); if (page<pages){ page++; render(); } });

  // Init
  apply();
})();
</script>

<script>
(() => {
  const $  = (s, r=document)=>r.querySelector(s);
  const $$ = (s, r=document)=>Array.from(r.querySelectorAll(s));
  const grid = $('#treatmentsGrid');
  if (!grid) return;

  /* Category → accent palette (rgb to allow opacity variants) */
  const ACCENT = {
    'Tooth Alignment':        [79,156,255],   // blue
    'Tooth Saving':           [96,210,164],   // mint
    'Implants & Replacement': [2,171,155],    // teal
    'Cosmetic & Smile':       [255,138,181],  // pink
    'Oral Surgery':           [255,177,79],   // orange
    'Kids & Family':          [155,140,255],  // purple
    'Periodontics':           [128,207,105],  // green
    'Diagnostics':            [122,212,255],  // cyan
    'Sedation & Sleep':       [160,180,255],  // periwinkle
    'Special Care':           [255,122,122],  // coral
    'Prosthodontics':         [255,170,90]    // amber
  };
  const rgb = (a)=>`rgb(${a[0]},${a[1]},${a[2]})`;
  const rgba = (a,o)=>`rgba(${a[0]},${a[1]},${a[2]},${o})`;

  const supportsFine   = matchMedia('(pointer:fine)').matches;
  const prefersReduce  = matchMedia('(prefers-reduced-motion: reduce)').matches;

  /* Find number of columns from computed style */
  const getCols = () => {
    const cs = getComputedStyle(grid).gridTemplateColumns;
    return cs ? cs.split(' ').length : 3;
  };

  const applyAccentsAndSkeleton = (card) => {
    const catText = card.querySelector('.t-badge')?.textContent?.trim() || '';
    const a = ACCENT[catText] || [14,165,163];
    card.style.setProperty('--accent', rgb(a));
    card.style.setProperty('--accent-14', rgba(a,.14));
    card.style.setProperty('--accent-20', rgba(a,.20));
    card.style.setProperty('--accent-25', rgba(a,.25));
    card.style.setProperty('--accent-30', rgba(a,.30));
    card.style.setProperty('--accent-35', rgba(a,.35));

    // Skeleton fade-in
    const media = card.querySelector('.t-media');
    const img   = card.querySelector('img');
    if (media && img) {
      const done = ()=> media.classList.add('img-loaded');
      if (img.complete && img.naturalWidth) done();
      img.addEventListener('load', done, {once:true});
      img.addEventListener('error', done, {once:true}); // remove skeleton on error too
    }
  };

  const markFeatured = () => {
    const cards = $$('.t-card', grid);
    cards.forEach(c=>c.classList.remove('featured'));
    const cols = getCols();               // e.g., 3
    const centerCol = Math.floor((cols-1)/2); // 1 for 3 cols, 0 for 1–2 cols
    // feature the first card that visually lands in the "center" column
    cards.forEach((c, i) => {
      if (i % cols === centerCol) c.classList.add('featured');
    });
  };

  /* Reveal on scroll + ripple origin + sheen + 3D tilt */
  const enhanceInteractions = () => {
    const cards = $$('.t-card', grid);
    if (!cards.length) return;

    // 1) Reveal (stagger per row)
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(ent=>{
        if (ent.isIntersecting) { ent.target.classList.add('in-view'); io.unobserve(ent.target); }
      });
    }, { rootMargin:'0px 0px -10% 0px', threshold: 0.08 });

    const cols = getCols();
    cards.forEach((card, i)=>{
      card.classList.add('reveal');
      const rowIndex = Math.floor(i / cols);
      const colIndex = i % cols;
      const delay = (rowIndex*120) + (colIndex*60);
      card.style.setProperty('--delay', `${delay}ms`);
      io.observe(card);

      // ripple origin + sheen
      card.addEventListener('pointerdown', (e)=>{
        const r = card.getBoundingClientRect();
        card.style.setProperty('--ripple-x', ((e.clientX-r.left)/r.width*100)+'%');
        card.style.setProperty('--ripple-y', ((e.clientY-r.top)/r.height*100)+'%');
      });
      card.addEventListener('mouseenter', ()=>{
        card.classList.remove('sheen'); void card.offsetWidth; card.classList.add('sheen');
      });
    });

    // 2) 3D tilt + magnetic hover (desktop only)
    if (supportsFine && !prefersReduce) {
      const maxTilt = 6;  // degrees
      const mag     = 4;  // px
      cards.forEach(card=>{
        let mx=0, my=0, rect=null, raf=null;
        const update = ()=>{
          raf=null;
          const w=rect.width, h=rect.height;
          const cx = (mx-rect.left)/w*2-1, cy = (my-rect.top)/h*2-1;
          card.style.setProperty('--rx', (-cy*maxTilt).toFixed(2)+'deg');
          card.style.setProperty('--ry', ( cx*maxTilt).toFixed(2)+'deg');
          card.style.setProperty('--tx', ( cx*mag).toFixed(2)+'px');
          card.style.setProperty('--ty', ( cy*mag).toFixed(2)+'px');
        };
        const onMove=(e)=>{ if(!rect) rect = card.getBoundingClientRect(); mx=e.clientX; my=e.clientY; if(!raf) raf=requestAnimationFrame(update); };
        const onEnter=()=>{ rect = card.getBoundingClientRect(); card.style.setProperty('--scale','1.02'); document.addEventListener('pointermove', onMove); };
        const onLeave=()=>{ document.removeEventListener('pointermove', onMove); card.style.removeProperty('--rx'); card.style.removeProperty('--ry'); card.style.removeProperty('--tx'); card.style.removeProperty('--ty'); card.style.setProperty('--scale','1'); rect=null; };
        card.addEventListener('pointerenter', onEnter);
        card.addEventListener('pointerleave', onLeave);
      });
    }
  };

  /* Run on every render (pagination/search) */
  const enhanceAll = () => {
    $$('.t-card', grid).forEach(c => applyAccentsAndSkeleton(c));
    markFeatured();
    enhanceInteractions();
  };

  // Watch changes to grid children
  const mo = new MutationObserver((m)=> {
    if (m.some(r => r.type === 'childList')) enhanceAll();
  });
  mo.observe(grid, { childList:true });

  // Recompute featured on resize (column count can change)
  addEventListener('resize', () => markFeatured());

  // Initial
  enhanceAll();
})();

(function(){
  const dl = window.dataLayer = window.dataLayer || [];
  const send = (event, params={}) => dl.push({ event, ...params });

  // Hero buttons (you already have these classes)
  const bind = (sel, handler) => document.querySelector(sel)?.addEventListener('click', handler);

  bind('.hero-button.whatsapp', e => {
    send('contact', { method: 'WhatsApp', location: 'hero', link_url: e.currentTarget.href });
  });

  bind('.hero-button.call', e => {
    send('contact', { method: 'Phone', location: 'hero', link_url: e.currentTarget.href });
  });

  bind('.hero-button.mail', e => {
    send('contact', { method: 'Email', location: 'hero', link_url: e.currentTarget.href });
  });

  bind('.hero-button.location', e => {
    send('view_map', { provider: 'Google Maps', location: 'hero', link_url: e.currentTarget.href });
  });

  // Sitewide safety net for tel/mailto/WhatsApp links
  document.addEventListener('click', function(e){
    const a = e.target.closest('a[href]');
    if (!a) return;
    const href = a.getAttribute('href');
    if (/^tel:/i.test(href))        send('contact', { method: 'Phone',  location: 'sitewide', link_url: href });
    else if (/^mailto:/i.test(href))send('contact', { method: 'Email',  location: 'sitewide', link_url: href });
    else if (/wa\.me|whatsapp\.com/i.test(href))
                                   send('contact', { method: 'WhatsApp',location: 'sitewide', link_url: href });
  }, { capture:true });
})();
</script>  
</body>
</html>












